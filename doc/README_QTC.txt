
This is a short intro for Tlf QTC handling.
Ervin Hegedus HA2OS, 2014.
airween@gmail.com


Introduction
============

QTC handling was maded for WAEDC contest for Tlf. It doesn't need
any external tool, Tlf supports it out of box. To enable that,
only needs to put the "QTC" option to logcfg.dat. This parameter
needs a value, which could be one of these: "RECV", "SEND", or
"BOTH". These values means you only want to receive or send
QTC's, or you want to send AND receive QTC's (for example, in
RTTY mode). Note, that currently only the RECV and SEND are
implemented.


QTC window
==========

When you enabled the QTC in logcfg.dat, you can open it from from
either field: callsign or exchange, it doesn't matter. To open
that, just press CTRL+Q. If you want to close that, just simple
press ESC. The window is divided to 2 site: the left site
contains the QTC's data, the right site contains the help.

The data site contains the QTC's fields:
* QTC callsign - 14 characters, allowed: alphanums, digits, /
* QTC serial - 4 characters, allowed: digits,
* number of QSO in current QTC block - 2 characters, allowed:
  digits
* 10 QSO lines in RECV mode:
  * time - 4 characters, allowed: digits, ?
  * callsign - 14 characters, allowed: alphanums, digits, /, ?
  * serial - 4 characters, allowed: digits, ?
* 10 QSO lines in SEND mode:
  * every line generated by the QSO's, all of them are formatted
    for three fields: time, callsign and serial

This site contains many "meta" information:
* at right of the QTC callsing field, Tlf shows the QTC info of
  current stations: how many QTC has it on the current band; when
  the station not send or received yet any QTC on the current
  band, there is this value: "0Q on 10". If you are on 40m, and
  station has 1 or more QTC, there is some like this: "5Q on 40"
* if you type the number of QSO in the QTC block in RECV mode,
  Tlf will shows its number at the begin of every line; if the
  station indicates that it will send to you 6 QSO, and you type
  it that field, Tlf will put a digit to the begin of first 6
  lines
* if you type the number of QSO in the QTC block in SEND mode,
  Tlf will find the next number QSO, which doesn't contain the
  current callsign (see contest rules 7.2). Note, that if you
  don't have eonugh QSO, you can't send the maximum (10), eg.
  you have only 9 QSO.
* in RECV mode, every QSO line has a status, which could be:
  "invalid", "valid", "confirmed". This status is indicated by a
  sign at the end of the line. When a line is invalid, you can
  see a "?", if the line is valid, then there isn't any character,
  and finally, if the QSO line had been confirmed, you can see
  a "*" sign
* in SEND mode, if you've sent a QTC line (with ENTER), at the
  end of the line you will see a "*" character, which means,
  you've sent that QTC


Navigation between the fields
=============================

You can move to any fields as you want and when you want. There
isn't mandatory order, but the navigation keys doesn't works in
all cases. Normally, with TAB you can move to the next field,
which followed by current, and Shift+TAB goes back. There is an
exception: if you in a QSO line, till you don't confirm the line,
TAB doesn't takes away, it takes to the time field, if you are in
the exchange field, and Shift+TAB does it in reverse mode.
With UP and DOWN cursor keys you can go to up or down. 


Navigation in a field
=====================

If you press an allowed character in a field, that will be
showed, and the cursor will goes to right next place. If you
press a not allowed character, then nothing happens. The
BACKSPACE key deletes the next charaters to left, and move the
right part to left. DELETE key deletes the current character as
you're staying, and shifts the characters to left at the next to
right.


Storing QTC's
=============

Tlf stores QTC's in two files. The received QTC's are stored in
QTC_recv.log, sent QTC's are stored in QTC_sent.log.


Receiving QTC
=============

If the station asks you, are you QRV for QTC, you can press the
CTRL+Q, it doesn't matter in which field are you: callsign or
exchange. If the QTC window opened, Tlf will send a message to
station: "QTC QRV".

If the callsign fields isn't empty, the content of that field
will be copied. If empty, you can fill the empty field in QTC
window. If station sent QTC previously, you can see the number
of QTC QSO's on the current band.

Then you can fill the QTC serial, and number of QSO's. What you
type as number of QSO's, Tlf will numbering so much lines, to
helps to see, how many lines remain.

If you start to receive the QTC's, you need to fill 3 fields:
time (HHMM, as hour and minutes), callsign and serial. If you
enter to a line, that line will be marked as "incomplete", that
you can see a "?" at the end of that line.

If you fill the time field (4 digits), the cursor will goes to
the callsign field. Fill that field, and press TAB to move the
next one. If you put to there at least 1 digit, Tlf recognizes
that line is complete, and "?" will disappear at the end of the
line.

Important: in any fields you can type "?", eg: "111?" in time
field, or "W?" in callsign field. That mean, you couldn't receive
that letter. Then you fill all fields vainly, the line remain as
incomplete. Elsewhere, Tlf assumes the line is complete.

This is important, because when you press the ENTER, Tlf will
send the answer to station based the status of the line. If the
line is incomplete, Tlf sends "AGN" message, but if it's
complete, it sends "R".

If you could receive the line, and pressed the ENTER, and Tlf
sent the "R" signal, then you will see a "*" at the end of the
line. That means, you receipt the QTC line from the station.

Now the cursor goes to the next line, to the time field, and you
can continue to receive the lines.

If you receive the last line, and all previous line are complete,
and the last one is complete too, then you press ENTER - now Tlf
will close the QTC window, and send "CFM ALL TNX" message to
station.

At this time the QTC datas will be writed to the logfile on the
disk, fields will be flushed, and if there is configured any
other node in logcfg.dat, then QTC lines will be sent to them.

On the other nodes, Tlf also will write the QTC's to its own
logfiles.

If you press ESC until you receive the QTC block, the data isn't
lost. Tlf flush's the fields in these cases:
* you received all QSO's, and saved to disc
* pressed ESC, and changed regular callsign field

Note, that Tlf send "QTC QRV" message only that case, if the
fields are empty. Keep in mind, if you've pressed ESC, and CTRL+Q
again, all data remains, and "QTC QRV" messages will NOT send.


Showing QTC capable stations 
============================

After you send or receive a QTC block from or to a station, Tlf
writes it to the log, but it stores in the memory too. Then, if
you meet that station on another bands, and use "Worked window",
then you can see, how many QTC's had been sent the station on
each band.

There is a "Q" letter on the border of "Worked window", and in
that column there are the number of QTC's. If there is "0" in a
line, that means you sent to or received from QTC from that
station, but not on that band. If there is a "Q", that means you
sent to or received from the station the maximum number of QTC.

This information also visible in cluster info, if you use that.
At the end of the callsign in bandmap, you can see a "0", "Q" or
any digit, which means same as above.


Shortkey summary
================

* CTRL+Q - open QTC window
* ESC - close QTC window
* TAB - move to the next field
* Shift+TAB - move to the previous field
* UP, DOWN - move to up or down
* BACKSPACE - delete the next to left
* DELETE - delete the current position, shift to left the right
  next
* ENTER - send "R" or "AGN" to station


If you have any question, just send an e-mail to me, or Tlf devel
list.


73,

Ervin
HA2OS

